{"title":"การใช้งาน Environment variable ใน Docker Compose","link":"https://www.somkiat.cc/docker-compose-with-environment-variables/","date":1611475429000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2021/01/docker-compose-150x150.jpg\" class=\"attachment-post-thumbnail size-post-thumbnail wp-post-image\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/01/docker-compose-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2021/01/docker-compose-75x75.jpg 75w\" sizes=\"(max-width: 150px) 100vw, 150px\" /></p><!-- wp:image {\"id\":21266,\"width\":624,\"height\":382,\"sizeSlug\":\"large\"} -->\n<figure class=\"wp-block-image size-large is-resized\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/01/docker-compose.jpg\" alt=\"\" class=\"wp-image-21266\" width=\"624\" height=\"382\"/></figure>\n<!-- /wp:image -->\n\n<!-- wp:paragraph -->\n<p>จากคำถามในกลุ่ม <strong><a href=\"https://www.facebook.com/groups/858633044176588/permalink/3907123952660800\" target=\"_blank\" rel=\"noreferrer noopener\">Docker Thailand</a></strong><br>เรื่องของการใช้ Environment variable ใน Docker compose<br>ซึ่งที่เขียนมาใน post นั้น ทำการ hard code <br>พวก sensitive data ไว้ในไฟล์ docker-compose.yml เลย<br>ยกตัวอย่างเช่น hostname/ip, username และ password ของ database<br><br><strong><em>ซึ่งไม่ควรทำอย่างยิ่ง ด้วยเรื่องของความปลอดภัยนั่นเอง<br>แต่ความง่ายมันไม่เข้าใครออกใคร จึงชอบทำกัน !!</em></strong></p>\n<!-- /wp:paragraph -->\n\n\n<span id=\"more-21265\"></span>\n\n\n<!-- wp:image {\"id\":21268,\"width\":502,\"height\":479,\"sizeSlug\":\"large\"} -->\n<figure class=\"wp-block-image size-large is-resized\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/01/Screen-Shot-2564-01-24-at-13.52.35.png\" alt=\"\" class=\"wp-image-21268\" width=\"502\" height=\"479\"/></figure>\n<!-- /wp:image -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>จึงแนะนำไปว่าควรปรับเปลี่ยนให้ทำง่าย ๆ ดังนี้</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph -->\n<p>เริ่มจากอ่านเอกสารจาก Docker เลย<br>เรื่องการใช้งาน <strong><a rel=\"noreferrer noopener\" href=\"https://docs.docker.com/compose/environment-variables/\" target=\"_blank\">Environment variables ใน Docker compose</a></strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>โดยหลัก ๆ แนะนำให้แยกออกมาจากซะ</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph -->\n<p>จากนั้นนำไปใส่ได้หลายที่ ประกอบไปด้วย</p>\n<!-- /wp:paragraph -->\n\n<!-- wp:list -->\n<ul><li>กำหนดจาก OS</li><li>ส่งผ่าน option -e env_name:value ของ docker-compose</li><li>ถ้าใช้ไฟล์ .env ก็กำหนด env_file ในไฟล์ docker-compose.yml</li><li>ใช้งาน <a href=\"https://docs.docker.com/engine/swarm/secrets/\" target=\"_blank\" rel=\"noreferrer noopener\">Docker secret</a> ได้</li></ul>\n<!-- /wp:list -->\n\n<!-- wp:paragraph -->\n<p><strong><em>ปล. ถ้าใช้งานไฟล์ .env แล้วก็อย่า push ขึ้น repository ละ</em></strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph -->\n<p>ตัวอย่างง่าย ๆ</p>\n<!-- /wp:paragraph -->\n\n<!-- wp:shortcode -->\n[gist id=\"be47ac72485e64a38b137eb3ddbe6402\" file=\"docker-compose.yml\"]\n<!-- /wp:shortcode -->","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"fb8773a04ff287701cfc7473f19d7b78c42f462ee715d77bec86c263629046e1","category":"Thai"}